# instpiper
Instagram api for social data


# API общие понятия

Вид возвращаемых ответов состоит из полей `status` и `error`, `data` и других.

### `status`

Тип - `integer`

Возможные значения - `1` и `2`

`1` - в случае успешного запроса

В большенстве случаев появляется поле `data`,  либо другие поля в зависимости от запроса, например `task_status`:

```json
{
    "status": 1,
    "task_status": true
}
```


`2` - в случае ошибки

В этом случае появляется поле `error`, ответ выглядит примерно так:

```json
{
    "status": 0,
    "error": "Did not get TOKEN argument, you must add token"
}
```



# API описание для нейронной сети

Алгоритм работы проги с нейронкой следующий:

1. Он делает запрос и получает список заданий (`task`)
2. Когда он обработал задание делает запрос с ответом и номером задания

### `GET /api/private?token=token`

Возвращает `json` типа

```json
{
    "status": 1,
    "data": [
		{"task": "099662ab590ee040030a1eaaf58d3e1141068679", "data": <data>},
		{"task": "099662ab590ee040030a1eaaf58d3e1141068679", "data": <data>}
		]
}
```

`data` будет равняться  `0`, если нет новых задач

### `POST /api/private?token=token`

Необходимо передать:

```json
{
            "task": "099662ab590ee040030a1eaaf58d3e1141068679",
            "data": <data>
}
```

Где `task` - номер задания полученный выше

`data` - Сгенерированный ответ

При успехе возвращает:

```json
{
    "status": 1
}
```


# API для пользователя

Пользователь после регестрации генерирует токены в вебе, потом админ помечает их валидными, после этого можно исползовать токен.

### `POST /api/createrequest?token=token`

Отправить данные на распознавание

В body отправляются бинарные текстовые данные, возможно прикрепить файл

Возвращается:

```json
{
    "status": 1,
    "task": "099662ab590ee040030a1eaaf58d3e1141068679"
}
```

### `GET /api/checkrequest?token=token`

Здесь пользователь проверяет свой запрос на готовность

Передается `task` полученный выше

```json
{
    "task": "eff9fb9549cc407be95e0ad3211f9f218b7f2328"
}
```

Возвращается:

```json
{
    "status": 1,
    "task_status": true
}
```

Если `task_status` `True` можно получать данные

### `GET /api/getdata?token=token`

Получение данных

Передается `task` также как выше:

```json
{
    "task": "eff9fb9549cc407be95e0ad3211f9f218b7f2328"
}
```

Возвращается:

```json
{
    "status": 1,
    "data": "okayy"
}
```

`data` содержит распознанные данные о гендере, возрасте и т. д.
