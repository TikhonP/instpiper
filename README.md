# Instpiper

Instagram api for social data

# API общие понятия

> Вид возвращаемых ответов состоит из полей `status` и `error`, `data` и других.

### Status

Тип - `integer`

Возможные значения - `1` и `2`

`1` - в случае успешного запроса

В большенстве случаев появляется поле `data`, либо другие поля в зависимости от запроса, например `task_status`:

```json
{"status": 1, "task_status": true}
```

`2` - в случае ошибки

В этом случае появляется поле `error`, ответ выглядит примерно так:

```json
{"status": 0, "error": "Did not get TOKEN argument, you must add token"}
```

### Task

Тип - `string`

Единицей информации в данном Api является `task` . Каждому фрагменту данных (batch) присваивается task id, с помощью которого оперируют другие запросы.

# API описание для нейронной сети

> Алгоритм работы проги с нейронкой следующий: он делает запрос и получает список заданий (`task`), когда он обработал задание делает запрос с ответом и номером задания

### Получить необработанные таски

`GET /api/private?token=token`

Body запроса оставить пустым

Возвращает `json` типа

```json
{
	"status": 1, 
	"data": [        
		{"task": "099662ab590ee040030a1eaaf58d3e1141068679", "data": "<data>"},
		{"task": "b0bc3457a2b2d895a7b944e98e46f1d76e07365b", "data": "<data>"}
	]
}
```

`data` будет равняться `0`, если нет новых задач

### Передать обработанную информацию одного таска на сервер

`POST /api/private?token=token`

Необходимо передать:

```json
{"task": "099662ab590ee040030a1eaaf58d3e1141068679", "data": "<data>"}
```

Где `task` - номер задания полученный выше

`data` - Сгенерированный ответ

При успехе возвращает:

```json
{"status": 1}
```

# API для пользователя

> Пользователь после регестрации генерирует токены в вебе, потом админ помечает их валидными, после этого можно исползовать токен.

### Отправить данные на распознавание

`POST /api/createrequest?token=token`

В body отправляются бинарные текстовые данные, возможно прикрепить файл

Возвращается:

```json
{"status": 1, "task": "099662ab590ee040030a1eaaf58d3e1141068679"}3
```

### Проверить статус запроса на распознавание

`GET /api/checkrequest?token=token`

Здесь пользователь проверяет свой запрос на готовность

Передается `task` полученный выше

```json
{"task": "eff9fb9549cc407be95e0ad3211f9f218b7f2328"}
```

Возвращается:

```json
{"status": 1, "task_status": true}
```

Если `task_status` `True` можно получать данные

### Получение данных

`GET /api/getdata?token=token`

Передается `task` также как выше:

```json
{"task": "eff9fb9549cc407be95e0ad3211f9f218b7f2328"}
```

Возвращается:

```json
{"status": 1, "data": "okayy"}
```

`data` содержит распознанные данные о гендере, возрасте и т. д.